<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href='http://fonts.googleapis.com/css?family=Lato:100,300|Parisienne' rel='stylesheet' type='text/css'>
        <link href='styles.css' rel='stylesheet' type='text/css'>
        <link rel="icon" type="image/png" href="favicon.png" />
        <title>
            Simone and Jonathan are getting married!
        </title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    </head>
    <script>
        var userLang = navigator.language || navigator.userLanguage;
        var langClass = userLang.substr(0,2);
        var toHide = "";
        ["de", "en"].map(function(item){
            

            if (item !== langClass)
                toHide += "." + item;
        })
        if (toHide === "")
            toHide = ".de";

        var sheet = (function() {
            var style = document.createElement("style");
            style.appendChild(document.createTextNode(""));
            document.head.appendChild(style);
            return style.sheet;
        })();

        sheet.insertRule(toHide + " { display: none; }");

    </script>
    <body>
        <h1 style="display:none;">
            Simone and Jonathan are getting married!
        </h1>
        <div id="title" class="slim box">
            <p class="heading">Simone and Jonathan</p>
        </div>
        <div class="slim">
            <p>Are getting married!</p>
            <p class="secondary">2pm Thursday 12th July 2018</p>
            <p class="secondary"><a id="location-link" href="https://goo.gl/maps/cbFwVP53zS82" target="_blank">Bamberger Haus</a></p>
            <p class="secondary">Munich</p>
            <a class="secondary infolink" data-target="#info" href="" style="margin-top:0">Info</a>
        </div>
        
        <script>
            mobile = (function(a){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))return true;})(navigator.userAgent||navigator.vendor||window.opera);
            if(mobile)
                document.getElementById("location-link").setAttribute("href", "https://goo.gl/maps/wwCffeuMgU52");
        </script>

        <div class="gap" id="gap1">
        </div>
        <script>
            var height = window.innerHeight;
            var gapElement = document.querySelector("#gap1");
            var gapRequired = height - gapElement.offsetTop;
            gapElement.style.height = gapRequired;
        </script>

        <div class="divider">....</div>
        <div class="content" id="about-the-wedding">
            <h2 id="info">About the Wedding</h2>
            <p class="en">We would be delighted if you could join us in celebrating our most special day.</p>
            <p class="de">Wir freuen uns sehr, unsere Hochzeit mit euch zu feiern.</p>
            <p class="en">The ceremony will begin at 2pm, and we ask that you arrive no earlier than 1pm, in case set up is still happening.</p>
            <p class="de">Die Zeremonie beginnt um 14 Uhr, und wir bitten Sie, kommen nicht früher als 13 Uhr an.</p>
            <p class="en">We promise bubbles, treats and laughter. To help us get ready, please let us know whether you can make it, and tell us your preference for the wedding breakfast. Let us know about any allergies.</p>
            <p class="de">Prickelndes, Schmankerl und Spaß sind versprochen. Damit alles rund läuft, lasst uns bitte wissen, ob ihr kommen könnt und welches Menü ihr wählt. Bitte gebt auch Bescheid, ob Allergien oder Unverträglichkeiten bestehen.</p>
            <p class="en">Please enter your message in the box below the menu choices, and hit the submit button. Your message will find its way to Simone and Jon's inbox. Don't forget to include your selection and your name(s). 
                Where there is a slash between two options, please write your choice of one or the other in your message.</p>
            <p class="de">Zur Qual der Wahl: Einfach die Maske unter der Menüauswahl verwenden, um uns euren Menüwunsch plus euren Namen mitzuteilen. An mancher Stelle kann man innerhalb des Menüs wählen. 
                Also, auf die Schrägstriche achten. Wir freuen uns schon auf eure Antworten.</p>
            <div class="columns">
                <div class="three-column menu box">
                    <h4>Meaty</h4>
                    <p>Salat</p>
                    <p class="little">Salad</p>
                    <p>Tafelspitz / Rehrücken</p>
                    <p class="little">High-welfare Veal / Venison</p>
                    <p>Dreierlei</p>
                    <p class="little">Ménage à trois</p>
                </div>
                <div class="three-column menu box">
                    <h4>Fishy</h4>
                    <p>Salat / Risotto</p>
                    <p class="little">Salad / Risotto</p>
                    <p>Fisch der Saison</p>
                    <p class="little">Catch of the day</p>
                    <p>Dreierlei</p>
                    <p class="little">Ménage à trois</p>
                </div>
                <div class="three-column third-column menu box">
                    <h4>Vege</h4>
                    <p>Salat / Risotto</p>
                    <p class="little">Salad / Risotto</p>
                    <p>Spinat-Käse-Knödel</p>
                    <p class="little">Spinach and cheese dumplings</p>
                    <p>Dreierlei</p>
                    <p class="little">Ménage à trois</p>
                </div>
            </div>
            <form id="rsvp">
                <div class="textarea">
                    <div class="label"><label for="rsvp-content">Your message</label></div>
                    <textarea class="textarea-field" name="content" id="rsvp-content" placeholder="e.g. We are coming to the wedding! We'd both like the fish please, one with the risotto and one with the salad. Can't wait! Simone Beitelrock and Jon Asby"></textarea>
                </div>
                <button id="submit">Submit</button>
                <br/>
                <p id="rsvp-spinner" style="display:none">
                    <img src="Infinity-3s-49px.svg" />
                </p>
                <p id="rsvp-done" style="display:none">
                    <img src="tick.png" />
                    <br/>
                    Thanks!
                </p>
                <p id="rsvp-error" style="display:none">
                    Oops! Something went wrong. I don't suppose you could email your reply manually? To 
                    <a href="mailto:me@jonasby.com">me@jonasby.com</a>
                </p>
            </form>
            <script>
                var loading = function (){
                    $("#submit").attr("disabled", true);
                    $("#submit").text("Sending...");
                    $("#rsvp-spinner").show();
                };

                var success = function(){
                    $("#rsvp-spinner").hide();
                    $("#submit").text("Done");
                    $("#submit").addClass("done");
                    $("#rsvp-done").show();
                };

                var failure = function (){
                    $("#rsvp-spinner").hide();
                    $("#submit").text("Uh oh");
                    $("#submit").addClass("error");
                    $("#rsvp-error").show();
                };

                var validate = function(){
                    var text = $("#rsvp-content").val();
                    if(!text)
                    {
                        highlight("#rsvp-content");
                        return false
                    }
                    return true;
                };

                var highlight = function(target){
                    $(target).addClass("red-border");
                }

                var clearHighlight = function (target) {
                    $(target).removeClass("red-border");
                };

                $(document).ready(function (){
                    $("#rsvp-content").on("input", function(){
                        clearHighlight("#rsvp-content");
                    });
                    $("#rsvp").submit(function(e){
                        e.preventDefault();
                        
                        if(!validate())
                            return;

                        loading();
                        
                        $.ajax({
                            url: 'https://young-reaches-41764.herokuapp.com/mail',
                            //url: 'http://localhost:5000/mail',
                            type: 'post',
                            data: $('#rsvp').serialize(),
                            success: success,
                            error: failure
                        });
                    });
                    $(".infolink").map(function(index, el){
                        el.onclick = function (event){
                            var target = event.currentTarget.attributes["data-target"].value;
                            $("html, body").animate({
                                scrollTop: $(target).offset().top
                            }, 400);
                            return false;
                        };
                    });
                });
            </script>
            <a class="secondary infolink" data-target="#extra" href="">More</a>
        </div>

        <div class="gap" id="gap2">
        </div>
        <script>
            var windowHeight = window.innerHeight;
            var contentHeight = document.querySelector("#about-the-wedding").clientHeight;
            var gapRequired = Math.max(0, windowHeight - contentHeight);
            var gapElement = document.querySelector("#gap2");
            gapElement.style.height = gapRequired;
        </script>

        <div class="divider">....</div>
        <div class="content" id="extra">
            <h3 class="en">Weather</h3>
            <h3 class="de">Wetter</h3>
            <p class="en">Whether the weather is warm, whether the weather is hot, we have to put up with the weather, whether we like it or not. We'll be safely under cover or roof in any case! Note that Munich can be very hot in the summer. The restaurant should remain fairly cool throughout.</p>
            <p class="de">Ob es regnet oder die Sonne scheint, wir haben für alle Eventualitäten vorbereitet. Sprich, no matter what, wir feiern!</p>
            <h3 class="en">Drinks</h3>
            <h3 class="de">Getränke</h3>
            <p class="en">We're delighted that you can join us in celebrating our special day, and we will grease the wheels with beers, wines, and hot and soft drinks throughout the day. Later in the evening the bar will turn over to a cash bar.</p>
            <p class="de">Prosecco, Bier, Wein und alkoholfreie Getränke werden über den Tag hin von uns gestellt. Später am Abend können Getränke an der Bar gekauft werden.</p>
            <h3 class="en">Gifts</h3>
            <h3 class="de">Geschenke</h3>
            <p class="en">While the presence of your company is the only gift we could ever ask for, we would be happy to accept a small gift of cash towards our honeymoon plans at the reception. We do not have a gift list, as our household is already complete!</p>
            <p class="de">Euer Kommen ist das schönste Geschenk für uns. Da wir uns sehr glücklich schätzen können, unseren Haushalt schon komplett zu haben, werden wir eine Sparbüchse für unsere Hochzeitsreise bereitstellen, der ihr gerne etwas beisteuern könnt.</p>
            <a class="secondary infolink en" data-target="#munich" href="">More</a>
        </div>

        <div class="gap" id="gap3">
        </div>
        <script>
            var windowHeight = window.innerHeight;
            var contentHeight = document.querySelector("#extra").clientHeight;
            var gapRequired = Math.max(0, windowHeight - contentHeight);
            var gapElement = document.querySelector("#gap3");
            gapElement.style.height = gapRequired;
        </script>

        <div class="divider en">....</div>
        <div class="content en" id="munich">
            <h2 class="heading">Munich</h2>
            <h3>Getting around</h3>
            <div class="prose">
                <p>Getting around Munich is super easy. It really helps to know a bit about the transport system before you arrive. Here's a mini summary.</p>
                <p>Buy a ticket and use any form of transport: the U-Bahn, S-Bahn, trams and buses all come under the same ticket. On the U-Bahn there are no ticket gates. Instead, they have stamping machines and ticket inspectors on the trains.</p>
                <p>Buy your paper ticket at a station (these take card) or on a tram or bus (these only take cash). Stamp the ticket in the stamping machine just before the platform, or in the stamping machine on the bus or tram. That marks the journey start time.</p>
                <p>Google maps is usually correct for all forms of transport.</p>
                <p>A day ticket is cheaper when you're doing more than two short journeys. Stamp it once, and go all day.</p>
                <p>It's important to carry cash around. Not everywhere takes card.</p>
            </div>
        </div>

        <div class="gap en" id="gap4">
        </div>
        <script>
            var windowHeight = window.innerHeight;
            var contentHeight = document.querySelector("#munich").clientHeight;
            var gapRequired = Math.max(0, windowHeight - contentHeight);
            var gapElement = document.querySelector("#gap4");
            gapElement.style.height = gapRequired;
        </script>
    </body>
</html>